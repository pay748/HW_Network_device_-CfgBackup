# HW_Network_device_-CfgBackup-MultithreadingSftp-
MultithreadingSftp，多设备配置自动下载保存，配置文件自动命名

该PY脚本用于从指定的网络设备上下载文件名为vrpcfg.zip的配置文件，并以各设备名做为文件命名保存在以时间节点创建的文件夹中。

使用说明：

  1.DeviceIP.xlsx用于存储需要备份的设备ip、设备名称。
  
  2.使用前需要根据脚本下载后存放的磁盘位置以及备份文件的存储位置修改DeviceCfgBackup_v2.0.py脚本中的绝对路径信息。
  
  3.暂未添加线程数限制，后期会加入。

------------------------------------------------------------------------------------------------------------------
【新的版本：V5.0】

2.0 > 5.0主要更新内容如下：
  
  1.增加设备当前运行配置保存功能，在下载配置文件前会保存设备当前运行的配置。确保下载的配置文件为实时配置
  
  2.现在可以支持华三网络设备的配置保存和备份了，修改device_type、ConnectHandler()字段即可
  
  3.可以根据当前脚本所在的文件路径，自动创建文件夹和下载路径。无需再手动修改路径参数fd、backup_path的值了
  
  4.增加下载并发连接数限制，可以通过修改max_connections参数的数值限制脚本的save和sftp下载并发数

使用注意：

DeviceCfgBackup.py通过读取DeviceIP.xlsx文件的设备信息来保存配置，使用前需要先将设备的信息保存在DeviceIP.xlsx文件中。
您可以直接通过其他表格将设备信息拷贝入DeviceIP.xlsx，对于IP字段脚本有针对除数字和"."外字符的过滤以防止IP字段中含有空格或其他非必要字符导致运行失败可放心使用。 
  
It is not pretty (sorry!) but it does the job for me. 
